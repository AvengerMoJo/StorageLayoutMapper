<html>
    <head>
        <title>Storage Layout Mapper Page</title>
        <link rel="stylesheet" href="/src/SLM-styles.css">
        <style>
            body {
                background-color:black;
                color: white;
            }
        </style>
        <!-- <base href="https://AvengerMoJo.github.io/" target="_blank"> -->
        <meta charset="UTF-8">
        <meta name="description" content="Storage Layout Mapping tool.">
        <meta name="keywords" content="AvengerMoJo, Storage, Layout, Mapping">
        <meta name="author" content="AvengerMoJo">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="module" src="/src/svg-layoutmapper.ts"></script>
        <script>
function updateURL() {
    //const queryString = window.location.search;
    var server_name, boxtype, server_u, drive_slot, drive_row, drive_col, drive_type, orientation;
    const params = new URLSearchParams( window.location.search );
    document.getElementById("ServerModelName").value = server_name = params.get("ServerModelName");
    document.getElementById("BoxType").value = boxtype = params.get("BoxType");
    document.getElementById("ServerHeight").value = document.getElementById("ServerHeightSelect").value = server_u = params.get("ServerHeight");
    document.getElementById("TotalDrive").value = document.getElementById("TotalDriveText").value = drive_slot = params.get("TotalDrive");
    document.getElementById("DriveRow").value = document.getElementById("DriveRowSelect").value = drive_row = params.get("DriveRow");
    document.getElementById("DriveCol").value = document.getElementById("DriveColSelect").value = drive_col = params.get("DriveCol");
    document.getElementById("DriveOrientation").value = orientation = params.get("DriveOrientation");
    document.getElementById("DriveType").value = drive_type = params.get("DriveType");
    let drives_type = new Array(drive_slot);
    for(let i=0; i< drive_slot; i++ ){
        drives_type[i]= drive_type;
    }
    clear(draw);
    drawDriveLayout(draw, server_name, boxtype, server_u, drive_slot, drive_row, drive_col, drives_type, orientation, 5, 5);
}
window.onload=updateURL;
        </script>
    </head>
    <body>
    <h1>Storage Drive Layout Configurator</h1>
    <div class='setting' id='setting'>

        <div class="ServerModel">
            <p>Server Model Name:
                <input width=100% type="text" value="<name>" class="ServerModelName" id="ServerModelName">
            </p>
        </div>

        <div class="BoxType">
            <p>Server Chassis Type:
            <select name='BoxType' id='BoxType'>
                <option value='Rackmount'>Rackmount</option>
                <option value='Tower'>Tower</option>
                <option value='Others'>Others</option>
            </select>
            </p>
        </div>
        <div class="ServerHeight">
            <p>Server Height:
            <select name='ServerHeightSelect' id='ServerHeightSelect'>
                <option value='1'>1U</option>
                <option value='2'>2U</option>
                <option value='3'>3U</option>
                <option value='4'>4U</option>
                <option value='5'>5U</option>
                <option value='6'>6U</option>
                <option value='7'>7U</option>
                <option value='8'>8U</option>
            </select>
            <input width=100% type="range" min="1" max="8" value="1" class="slider" id="ServerHeight">
            <script>
            var server_height_slider = document.getElementById("ServerHeight");
            var server_height_select = document.getElementById("ServerHeightSelect");
            server_height_select.value = server_height_slider.value;
            server_height_slider.oninput = function() {
                server_height_select.value = server_height_slider.value;
            }
            server_height_select.oninput = function() {
                server_height_slider.value = server_height_select.value;
            }
            </script>
            </p>
        </div>
        <div class="DriveRow">
            <p>Drive Row Number:
            <select name='DriveRowSelect' id='DriveRowSelect'>
                <option value='1'>1 Row</option>
                <option value='2'>2 Row</option>
                <option value='3'>3 Row</option>
                <option value='4'>4 Row</option>
                <option value='5'>5 Row</option>
                <option value='6'>6 Row</option>
                <option value='7'>7 Row</option>
                <option value='8'>8 Row</option>
            </select>
            <input width=100% type="range" min="1" max="8" value="1" class="slider" id="DriveRow">
            <script>
            var drive_row_slider  = document.getElementById("DriveRow");
            var drive_row_select  = document.getElementById("DriveRowSelect");
            drive_row_select.value= drive_row_slider.value;
            drive_row_slider.oninput = function() {
                drive_row_select.value = drive_row_slider.value;
            }
            drive_row_select.oninput = function() {
                drive_row_slider.value = drive_row_select.value;
            }
            </script>
            </p>
        </div>
        <div class="DriveCol">
            <p>Drive Column Number:
            <select name='DriveColSelect' id='DriveColSelect'>
                <option value='1'>1 Column</option>
                <option value='2'>2 Column</option>
                <option value='3'>3 Column</option>
                <option value='4'>4 Column</option>
                <option value='5'>5 Column</option>
                <option value='6'>6 Column</option>
                <option value='7'>7 Column</option>
                <option value='8'>8 Column</option>
                <option value='9'>9 Column</option>
                <option value='10'>10 Column</option>
                <option value='11'>11 Column</option>
                <option value='12'>12 Column</option>
                <option value='13'>13 Column</option>
                <option value='14'>14 Column</option>
                <option value='15'>15 Column</option>
                <option value='16'>16 Column</option>
                <option value='17'>17 Column</option>
                <option value='18'>18 Column</option>
                <option value='19'>19 Column</option>
                <option value='20'>20 Column</option>
                <option value='21'>21 Column</option>
                <option value='22'>22 Column</option>
                <option value='23'>23 Column</option>
                <option value='24'>24 Column</option>
            </select>
            <input width=100% type="range" min="1" max="24" value="1" class="slider" id="DriveCol">
            <script>
            var drive_col_slider = document.getElementById("DriveCol");
            var drive_col_select = document.getElementById("DriveColSelect");
            drive_col_select.value = drive_col_slider.value;
            drive_col_slider.oninput = function() {
                drive_col_select.value = drive_col_slider.value;
            }
            drive_col_select.oninput = function() {
                drive_col_slider.value = drive_col_select.value;
            }
            </script>
            </p>
        </div>
        <div class="TotalDrive">
            <p>Total Drive Number:
            <input type="text" class="TotalDriveText" id="TotalDriveText" value="1">
            <input width=100% type="range" min="1" max="60" value="1" class="slider" id="TotalDrive">
            <script>
            var total_driver_slider = document.getElementById("TotalDrive");
            var total_driver_text= document.getElementById("TotalDriveText");
            total_driver_text.value = total_driver_slider.value;
            total_driver_slider.oninput = function() {
                total_driver_text.value = total_driver_slider.value;
            }
            total_driver_text.oninput = function() {
                total_driver_slider.value = total_driver_text.value;
            }
            </script>
            </p>
        </div>
        <div class="DriveType">
            <p>Hard Drive Type:
            <select name='DriveType' id='DriveType'>
                <option value="3.5' HDD">3.5' HDD</option>
                <option value="2.5' HDD">2.5' HDD</option>
                <option value="2.5' HDD">2.5' SSD</option>
                <option value='NVMe'>NVMe</option>
            </select>
            </p>
        </div>
        <div class="DriveOrientation">
            <p>Hard Drive Orientation:
            <select name='DriveOrientation' id='DriveOrientation'>
                <option value='Vertical'>Vertical</option>
                <option value='Horizontal'>Horizontal</option>
                <option value='Others'>Others</option>
            </select>
            </p>
        </div>
        <div id="Draw" class="Draw">
            <button onclick="window.call()">Draw</button>
            <script>
                function call() {
                    clear(draw);
                    server_name = document.getElementById("ServerModelName").value;
                    boxtype = document.getElementById("BoxType").value;
                    server_u = document.getElementById("ServerHeight").value;
                    drive_slot = document.getElementById("TotalDrive").value;
                    drive_row = document.getElementById("DriveRow").value;
                    drive_col = document.getElementById("DriveCol").value;
                    drive_type = document.getElementById("DriveType").value;
                    drives_type = new Array(drive_slot);
                    for( i=0; i< drive_slot; i++ ){
                        // console.log( "TotalDrive " + drive_slot + "Drive Type =" + drive_type )
                        drives_type[i]= drive_type;
                    }
                    orientation = document.getElementById("DriveOrientation").value;
                    drawDriveLayout(draw, server_name, boxtype, server_u, drive_slot, drive_row, drive_col, drives_type, orientation, 5, 5);
//window.location.search = "?ServerModelName=" + server_name + "&BoxType=" + boxtype +
//    "&ServerHeight=" + server_u + "&TotalDrive=" + drive_slot + "&DriveRow=" + drive_row +
//    "&DriveCol=" + drive_col + "&DriveType=" + drive_type + "&Orientataion=" + orientataion;
                    const url = new URL( window.location );
                    url.searchParams.set('ServerModelName', server_name);
                    url.searchParams.set('BoxType', boxtype);
                    url.searchParams.set('ServerHeight', server_u);
                    url.searchParams.set('TotalDrive', drive_slot);
                    url.searchParams.set('DriveRow', drive_row);
                    url.searchParams.set('ServerHeight', server_u);
                    url.searchParams.set('TotalDrive', drive_slot);
                    url.searchParams.set('DriveRow', drive_row);
                    url.searchParams.set('DriveCol', drive_col);
                    url.searchParams.set('DriveType', drive_type);
                    url.searchParams.set('DriveOrientation', orientation);
                    window.history.pushState({}, '', url);
                }
            </script>
            <div id="Download" class="Download">
                <input width=100% type="text" min="1" max="60" value="sample.svg" class="Filename" id="Filename">
                <button onclick="window.download()">Download</button>
                <script>
                    function download() {
                        var filename = document.getElementById("Filename").value;
                        downloadString( draw.svg(), "text/csv", filename);
                    }
                </script>
            </div>
        </div>
    </div>
        <div id="Json" class="Json">
            <button onclick="window.jsonview()">JSON-View</button>
            <script>
                function jsonview() {
                    showjson( draw.svg() );
                }
            </script>
            <div id="JsonView" class="JsonView">
                <pre><code id="jsonstring"></code></pre>
            </div>
        </div>
    <div id='box' class='box'></div>
    </body>
</html>

